(()=>{"use strict";function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var n,i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(n=function(t){if("object"!=r(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0===e)return String(t);e=e.call(t,"string");if("object"!=r(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}(n=o.key),"symbol"==r(n)?n:n+""),o)}}function t(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}var n=t(function t(){e(this,t),this.events={}},[{key:"on",value:function(t,e){this.events[t]||(this.events[t]||(this.events[t]=[]),this.events[t].push(e))}},{key:"emit",value:function(t){for(var e=arguments.length,n=new Array(1<e?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];this.events[t]&&this.events[t].forEach(function(t){return t.apply(void 0,n)})}},{key:"off",value:function(t,e){this.events[t]&&(this.events[t]=this.events[t].filter(function(t){return t!==e}))}},{key:"has",value:function(t){return!!this.events[t]}},{key:"get",value:function(t){return this.events[t]}}]);function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var o=t(function t(){e(this,t),this.init(),window.eventCore=new n},[{key:"init",value:function(){var t=this,e=$("html");$(".menu-item.toggle").on("click",function(){e.addClass("active-mask"),t.switchSidebar(1)}),window.lazyLoadInstance=new LazyLoad({elements_selector:"img",threshold:0,data_src:"lazy-src"}),$(".adsorption .switch-model").on("click",function(){var t="light"===(localStorage.getItem("Butterfly-data-theme")||"light")?"dark":"light",e=(window.eventCore.emit("changeTheme",t),"light"==t);!function(t,e){var n,i,e=1<arguments.length&&void 0!==e?e:0;null!=(n=window)&&n.drawEchartsDom&&(i=window.echarts.init(window.drawEchartsDom,t),1===e&&(i.dispose(),i=window.echarts.init(window.drawEchartsDom,t)),i.setOption(window.drawEchartsOption),window.addEventListener("resize",function(){return i.resize()}))}(e?"light":"dark",1),$("html").attr("data-theme",e?"light":"dark"),localStorage.setItem("Butterfly-data-theme",e?"light":"dark"),window.dataTheme=t}),$(".adsorption .back-top").on("click",function(){$("html").animate({scrollTop:0},300)}),$(".global-mask").on("click",function(){e.removeClass("active-mask"),t.switchSidebar(0)}),this.sidebar(),this.scroll(),this.runDay(),this.removelrc()}},{key:"switchSidebar",value:function(t){$(".sidebar").css({transform:"translate3d(".concat(1===t?"-100%":"0",", 0, 0)")})}},{key:"sidebar",value:function(){$(".sidebar-menus .menu-item").each(function(){var t=$(this);t.hasClass("relative")&&$(this).on("click",function(){t.toggleClass("active").children(".menu-child").stop().toggle("fast")})})}},{key:"scroll",value:function(){var n=$(".header .nav"),i=$(".adsorption"),o=$(".post .aside .post-sticky"),r=0,t=function(n){function i(){s=!1===options.leading?0:(new Date).getTime(),o=null,n.apply(r,a),r=a=null}var o,r,a,s=0;options=options||{};return function(){var t=(new Date).getTime(),e=200-(t-(s=s||!1!==options.leading?s:t));r=this,a=arguments,e<=0||200<e?(o&&(clearTimeout(o),o=null),s=t,n.apply(r,a),o||(r=a=null)):o||!1===options.leading||(o=setTimeout(i,e))}}(function(t){var e=window.scrollY||document.documentElement.scrollTop;56<e?(r<=e?(n.hasClass("visible")&&n.addClass("hidden").removeClass("visible"),o&&o.css("top",""),i.hasClass("active")||i.addClass("active")):(n.hasClass("visible")||n.addClass("visible").removeClass("hidden"),o&&o.css("top","70px")),n.hasClass("style")||n.addClass("style")):0===e&&(n.removeClass("style visible hidden"),i.hasClass("active"))&&i.removeClass("active"),r=e});window.addEventListener("scroll",t)}},{key:"runDay",value:function(){var t,e,n=$(".aside-web-info .run-day");n&&(e=n.attr("data-runday"))&&("Invalid Date"!==(t=new Date).toString()?(t=t.getTime()-new Date(e).getTime(),e=parseInt((t/864e5).toString()),n.html("".concat(e," 天"))):n.html('<span style="color:#fd0000">建站时间配置错误</span>'))}},{key:"removelrc",value:function(){var o=document.querySelector(".aplayer-icon-lrc");o&&new MutationObserver(function(t,e){var n,i=function(t){var e,n,i,o,r,a="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(a)return i=!(n=!0),{s:function(){a=a.call(t)},n:function(){var t=a.next();return n=t.done,t},e:function(t){i=!0,e=t},f:function(){try{n||null==a.return||a.return()}finally{if(i)throw e}}};if(Array.isArray(t)||(a=function(t){var e;if(t)return"string"==typeof t?s(t,void 0):"Map"===(e="Object"===(e=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:e)||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?s(t,void 0):void 0}(t)))return a&&(t=a),o=0,{s:r=function(){},n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:r};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(t);try{for(i.s();!(n=i.n()).done;)"childList"===n.value.type&&(e.disconnect(),setTimeout(function(){o.click()},1))}catch(t){i.e(t)}finally{i.f()}}).observe(document,{childList:!0,subtree:!0})}}]);document.addEventListener("DOMContentLoaded",function(){return window.GlobalClass=new o})})();